"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[674],{35996:function(e,t,n){var l=n(95318);t.Z=void 0;var r=l(n(67294)),s=(0,l(n(2108)).default)(r.default.createElement("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Clear");t.Z=s},28428:function(e,t,n){var l=n(95318);t.Z=void 0;var r=l(n(67294)),s=(0,l(n(2108)).default)(r.default.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");t.Z=s},18442:function(e,t,n){var l=n(95318);t.Z=void 0;var r=l(n(67294)),s=(0,l(n(2108)).default)(r.default.createElement("path",{d:"M15 16h4v2h-4zm0-8h7v2h-7zm0 4h6v2h-6zM3 18c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V8H3v10zM14 5h-3l-1-1H6L5 5H2v2h12z"}),"DeleteSweep");t.Z=s},18642:function(e,t,n){var l=n(85893),r=n(67294),s=n(23855),a=n(84380),c=n(42298),o=n(868);t.Z=r.memo(function(e){let{children:t}=e,n=(0,s.Z)(t),r=(0,a.Z)(n,new Date);return(0,l.jsx)(o.ZP,{title:(0,c.Z)(n,"PPPPpp"),children:(0,l.jsxs)("span",{children:[r," ago"]})})})},73727:function(e,t,n){n.d(t,{Z:function(){return s}});var l=n(85893),r=n(95477);function s(){return(0,l.jsx)("div",{style:{height:"calc(100vh - 64px)",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",position:"absolute",top:64,left:0,right:0},children:(0,l.jsx)(r.Z,{})})}},72536:function(e,t,n){n.d(t,{Z:function(){return I}});var l=n(85893),r=n(67294),s=n(82302),a=n(99613),c=n(88222),o=n(83750),i=n(57394),d=n(41120),h=n(59693),u=n(41749),x=n(282),f=n(22318),m=n(868),p=n(80797),j=n(17812),Z=n(18442),y=n(28428),g=n(41664),v=n.n(g),C=n(82883),k=n(52663),w=n(66856),S=n(29525),b=n(87462);n(45697);var D=n(1591),z=r.forwardRef(function(e,t){return r.createElement(f.Z,(0,b.Z)({component:"p",variant:"body1",color:"textSecondary",ref:t},e))}),P=(0,D.Z)({root:{marginBottom:12}},{name:"MuiDialogContentText"})(z),M=n(66083);let O=(0,d.Z)(e=>({danger:{backgroundColor:e.palette.error.main,color:"white","&:hover":{backgroundColor:(0,h._j)(e.palette.error.main,.1)}}}));function R(e){let{title:t,message:n,confirmText:s,denyText:a,onConfirm:c,onDeny:o,open:i,onClose:d}=e,h=O(),u=(0,r.useCallback)(()=>{d(),c&&c()},[d,c]),f=(0,r.useCallback)(()=>{d(),o&&o()},[d,o]);return(0,l.jsx)("div",{children:(0,l.jsxs)(k.Z,{open:i,onClose:d,children:[(0,l.jsx)(M.Z,{children:t}),(0,l.jsx)(S.Z,{children:(0,l.jsx)(P,{children:n})}),(0,l.jsxs)(w.Z,{children:[(0,l.jsx)(x.Z,{onClick:f,children:a}),(0,l.jsx)(x.Z,{className:h.danger,onClick:u,variant:"contained",autoFocus:!0,children:s})]})]})})}R.defaultProps={open:!1,denyText:"Cancel"};var E=n(92122),L=n(68794),N=n(33426),T=n(7397),A=n(88995),H=n(35996);function _(e){let{onClear:t,value:n,...r}=e;return(0,l.jsx)(N.Z,{...r,value:n,size:"small",variant:"outlined",InputProps:{startAdornment:(0,l.jsx)(T.Z,{position:"start",style:{marginLeft:-3},children:(0,l.jsx)(A.Z,{style:{opacity:.5}})}),endAdornment:(0,l.jsx)(T.Z,{position:"end",style:{marginRight:-6},children:(0,l.jsx)(j.Z,{size:"small",onClick:t,style:{visibility:n.length?"visible":"hidden"},children:(0,l.jsx)(H.Z,{style:{height:20,width:20}})})})}})}let F=(0,d.Z)(e=>({checkCell:{padding:0,width:30},danger:{backgroundColor:e.palette.error.main,color:"white","&:hover":{backgroundColor:(0,h._j)(e.palette.error.main,.1)}},noMatches:{...e.typography.body1,opacity:.6,marginLeft:e.spacing(1.5)}}));function I(e){var t,n;let{title:d,records:h,refresh:g,apiPath:k,label:w,createLabel:S,searchLabel:b,newHref:D,newAs:z,columns:P,row:M,actions:O,style:N}=e,T=F(),[A,H]=(0,r.useState)({confirmDestroySelectedOpen:!1,confirmDestroyOpen:!1}),{refresh:I,session:V}=(0,r.useContext)(E.Z),{selection:B,toggle:U,toggleAll:J,allSelected:q,clearSelection:G}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],[n,l]=(0,r.useState)(()=>new Set(t)),s=(0,r.useCallback)(t=>{t.target.checked?l(new Set(e)):l(new Set([]))},[e]),a=(0,r.useCallback)(t=>{t.target.checked?l(new Set([...n,e[t.target.value]])):(n.delete(e[t.target.value]),l(new Set(n)))},[e,n]),c=(0,r.useMemo)(()=>e.length===n.size,[n]),o=(0,r.useCallback)(()=>{l(new Set)},[]);return{toggleAll:s,selection:n,setSelection:l,toggle:a,allSelected:c,clearSelection:o}}(h),K=(0,r.useCallback)(()=>{H(e=>({...e,confirmDestroySelectedOpen:!0}))},[B]),Q=(0,r.useCallback)(async()=>{let e=Array.from(B).map(e=>e.id);toast("".concat(w.charAt(0).toUpperCase()+w.slice(1)).concat(1!==e.length?"s":""," deleted.")),await fetch("/rest/".concat(k,"/destroy_selected"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ids:e})}),await g(),I(),G()},[B,w]),W=(0,r.useCallback)(e=>{H({confirmDestroyOpen:!0,destroyRecord:e})},[]),X=(0,r.useCallback)(async()=>{toast("".concat(w," ").concat(A.destroyRecord.name," deleted")),await fetch("/rest/".concat(k,"/").concat(A.destroyRecord.id),{method:"DELETE"}),g(),I(),H(e=>({...e,destroyRecord:null}))},[A]),{values:Y,handleChange:$,setFieldValue:ee}=(0,L.TA)({initialValues:{search:""}}),et=(0,r.useMemo)(()=>h.filter(e=>-1!==e.name.toLowerCase().indexOf(Y.search.toLowerCase())),[h,Y.search]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(R,{open:A.confirmDestroyOpen,onClose:()=>H(e=>({...e,confirmDestroyOpen:!1})),title:"Delete ".concat(w),message:'Are your sure your want to delete "'.concat(null===(t=A.destroyRecord)||void 0===t?void 0:t.name,'"?'),onConfirm:X,confirmText:'Delete "'.concat(null===(n=A.destroyRecord)||void 0===n?void 0:n.name,'"')}),(0,l.jsx)(R,{open:A.confirmDestroySelectedOpen,onClose:()=>H(e=>({...e,confirmDestroySelectedOpen:!1})),title:"Delete Selected",message:"Are your sure your want to delete the ".concat(B.size," selected ").concat(w,"(s)?"),onConfirm:Q,confirmText:"Delete Selected"}),(null!=S||null==V.user)&&(0,l.jsxs)(u.Z,{item:!0,xs:12,style:{display:"flex",alignItems:"flex-start"},children:[V.user&&S&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(v(),{href:D,as:z,passHref:!0,legacyBehavior:!0,children:(0,l.jsx)(x.Z,{variant:"contained",color:"primary",children:S})}),(0,l.jsx)(C.Z,{spacing:1}),O&&O.map((e,t)=>(0,l.jsxs)("div",{style:{display:"flex"},children:[e,(0,l.jsx)(C.Z,{spacing:1})]},t))]}),!V.user&&(0,l.jsx)(v(),{href:"/sign-up?afterSignIn=".concat(encodeURIComponent(z)),passHref:!0,children:(0,l.jsxs)(x.Z,{variant:"contained",color:"primary",children:["Sign up for a free account to ",S]})}),V.user&&h.length>0&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{style:{flex:1}}),(0,l.jsx)(_,{name:"search",onChange:$,value:Y.search,autoFocus:!0,placeholder:b,onClear:()=>ee("search","")})]})]}),0===h.length?null:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(u.Z,{item:!0,xs:12,style:N,children:[d&&(0,l.jsx)(f.Z,{variant:"h2",gutterBottom:!0,children:d}),(0,l.jsxs)(s.Z,{size:"small",children:[(0,l.jsx)(o.Z,{children:(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(c.Z,{className:T.checkCell,children:(0,l.jsx)(m.ZP,{title:"Select all Records",children:(0,l.jsx)(p.Z,{onChange:J,checked:q})})}),P.map(e=>(0,l.jsx)(c.Z,{children:e},e)),(0,l.jsx)(c.Z,{style:{whiteSpace:"nowrap"},children:(0,l.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:0===h.length?null:(0,l.jsx)(m.ZP,{title:"Delete Selected",children:(0,l.jsx)("span",{children:(0,l.jsx)(j.Z,{disabled:0===B.size,onClick:K,children:(0,l.jsx)(Z.Z,{})})})})})})]})}),(0,l.jsx)(a.Z,{children:et.map((e,t)=>(0,l.jsxs)(i.Z,{children:[(0,l.jsx)(c.Z,{className:T.checkCell,children:(0,l.jsx)(p.Z,{checked:B.has(e),onChange:U,value:t})}),M(e,Y.search),(0,l.jsx)(c.Z,{children:(0,l.jsx)("div",{style:{display:"flex",justifyContent:"flex-end"},children:(0,l.jsx)(m.ZP,{title:"Delete ".concat(e.name),children:(0,l.jsx)("span",{children:(0,l.jsx)(j.Z,{onClick:()=>W(e),children:(0,l.jsx)(y.Z,{})})})})})})]},e.id))})]})]}),0==et.length&&Y.search.length>0&&(0,l.jsx)(u.Z,{item:!0,xs:12,children:(0,l.jsxs)("div",{className:T.noMatches,children:['No matches found for "',Y.search,'".']})})]})]})}I.defaultProps={searchLabel:"Search..."}}}]);